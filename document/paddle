3) ÃœÃ§Ã¼ncÃ¼ addÄ±m: Checkout yaratmaq (SÉ™nin backend-in Paddle API-ni Ã§aÄŸÄ±rÄ±r)
3.1 MÃ¼ÅŸtÉ™ri sÉ™nin saytÄ±nda â€œSubscribeâ€ klik edir

Frontend sÉ™nin backend-É™ Ã§aÄŸÄ±rÄ±r:

SÉ™nin API:

POST /api/billing/checkout
Body:

email

priceId

instanceId (sÉ™nin mÉ™hsulun Ã¼Ã§Ã¼n lazÄ±mdÄ±r)

3.2 Backend Paddle API-ni Ã§aÄŸÄ±rÄ±r

Backend burada Paddle-a Transaction yaradÄ±r:

Paddle API:

POST /transactions

Body-nin mÉ™ÄŸzi:

items: [{ price_id, quantity }]

custom_data: { email, instanceId, checkoutRef }

NÉ™ticÉ™:

Paddle cavabÄ±nda sÉ™nÉ™ checkout URL qaytarÄ±r (checkout.url)

3.3 Frontend redirect edir

Frontend checkoutUrl-a redirect edir.
MÃ¼ÅŸtÉ™ri Paddle checkout-da kartla Ã¶dÉ™yir.

4) DÃ¶rdÃ¼ncÃ¼ addÄ±m: Ã–dÉ™niÅŸ tamamlanÄ±r (Paddle tÉ™rÉ™findÉ™)

MÃ¼ÅŸtÉ™ri Ã¶dÉ™niÅŸi bitirÉ™ndÉ™:

Paddle transaction-u â€œpaid/completedâ€ edir

MÃ¼ÅŸtÉ™riyÉ™ receipt gÃ¶stÉ™rir

SÉ™ni success page-É™ yÃ¶nlÉ™ndirÉ™ bilÉ™r (opsional)

Amma burada qÄ±zÄ±l qayda:

Success page gÃ¶rÃ¼ndÃ¼ deyÉ™ â€œpayment olduâ€ demÉ™k deyil. Backend yalnÄ±z webhook-a inanÄ±r.

5) BeÅŸinci addÄ±m: Webhook gÉ™lir (ÆN VACÄ°B mÉ™rhÉ™lÉ™)

Paddle sÉ™nin backend-É™ webhook gÃ¶ndÉ™rir:

SÉ™nin endpoint:

POST /api/paddle/webhook

Header:

Paddle-Signature: ts=...;h1=...

Body:

event_type (mÉ™s: transaction.completed)

data (transaction mÉ™lumatlarÄ±)

iÃ§indÉ™ sÉ™nin gÃ¶ndÉ™rdiyin custom_data da olur (email, instanceId, checkoutRef)

5.1 Backend webhook-u imza ilÉ™ yoxlayÄ±r

SÉ™n:

raw body gÃ¶tÃ¼rÃ¼rsÉ™n

Paddle-Signature-u HMAC ilÉ™ verify edirsÉ™n
Verify olmazsa â†’ 401 qaytarÄ±rsan

5.2 Ä°dempotency (tÉ™krar webhook)

Paddle eyni webhook-u tÉ™krar ata bilÉ™r.
Ona gÃ¶rÉ™ sÉ™n:

event_id vÉ™ ya transaction_id-ni DB-dÉ™ unique saxlayÄ±rsan

ÆgÉ™r artÄ±q iÅŸlÉ™nibsÉ™ â†’ â€œokâ€ deyib Ã§Ä±xÄ±rsan

6) AltÄ±ncÄ± addÄ±m: DB-yÉ™ yazmaq vÉ™ Licence aktivlÉ™ÅŸdirmÉ™k

Webhook verified + event transaction.completed (vÉ™ ya payment success) olduqda:

DB-dÉ™ â€œpaymentâ€ record yaradÄ±rsan:

email

transaction_id

price_id / plan

status = PAID

paidAt

Licence yaradÄ±rsan:

licenseKey

instanceId

validFrom, validUntil

status = ACTIVE

Email gÃ¶ndÉ™rirsÉ™n:

â€œYour license key is â€¦â€

(vÉ™ ya UI-dÉ™ gÃ¶stÉ™rirsÉ™n)

NÉ™ticÉ™:

MÃ¼ÅŸtÉ™ri artÄ±q mÉ™hsulu aÃ§Ä±b aktivlÉ™ÅŸdirÉ™ bilir.



AddÄ±mlar
1. Paddle Dashboard-a daxil ol

ğŸ‘‰ https://vendors.paddle.com

(yeni UI-dÉ™ bÉ™zÉ™n https://billing.paddle.com)

2. Sol menyudan gir:

Developer tools â†’ Authentication / API keys

(UI adlarÄ± bir az dÉ™yiÅŸÉ™ bilÉ™r, amma mÃ¼tlÉ™q â€œAPI keyâ€ yazÄ±r)



1. Paddle Dashboard

ğŸ‘‰ https://vendors.paddle.com

2. Sol menyu:

Developer tools â†’ Webhooks / Notifications

3. Webhook yarat (vÉ™ ya mÃ¶vcuduna bax)

URL:

https://api.senin-domain.com/api/paddle/webhook


Events:

transaction.completed

subscription.created

subscription.updated

subscription.cancelled

4. Secret key

Webhook yaradanda Paddle sÉ™nÉ™ Secret gÃ¶stÉ™rir:

whsec_xxxxxxxxxxxxx


ğŸ‘‰ BAX BU PADDLE_WEBHOOK_SECRET-dir